/*!
Sticky Div jQuery plugin.

Version 1.0.0
Full source at https://github.com/marc-andrew/stickydiv
Demo at http://marcandrew.net/stickydiv

MIT License (http://www.opensource.org/licenses/mit-license.html)
*/

!function(a){a.fn.stickydiv=function(){return this.each(function(){var b=a(this),c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0;a(window).scroll(function(){var l=a(this).scrollTop(),m=b.height(),n=a(window).height(),o=a("#main").height(),p=m-n;if(b.parent().prev().length&&b.parent().prevAll(":visible").each(function(){g=a(this).outerHeight()}),c=l-g,p>0)if(c>d){var q=o-(m-p);c>=0&&q>c?(k=h>0&&p>h?h:p,k>i?(b.removeClass("sticky").css({position:"absolute",top:e,bottom:"auto"}),i=c-e):(b.addClass("sticky").css({position:"fixed",top:"auto",bottom:0}),i=p),h=0,f=c):c>=q&&(b.removeClass("sticky").css({position:"absolute",top:"auto",bottom:0}),h=0,f=q)}else{var r=o-m;c>=0&&r>c?(j=i>0&&p>i?i:p,j>h?(b.removeClass("sticky").css({position:"absolute",top:f-p,bottom:"auto"}),h=f-c):(b.addClass("sticky").css({position:"fixed",top:0,bottom:"auto"}),h=p),i=0,e=c):0>=c&&(b.removeClass("sticky").css({position:"static",top:"auto",bottom:"auto"}),e=0,f=0,h=0)}else c>0?b.addClass("sticky").css({position:"fixed",top:0,bottom:"auto"}):b.removeClass("sticky").css({position:"static",top:"auto",bottom:"auto"});d=c})})}}(jQuery);